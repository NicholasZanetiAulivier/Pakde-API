const instructions = {};

//Table creation scripts
instructions.tables = {};

instructions.tables.admins =
    `CREATE TABLE admins(
        id smallint GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
        username VARCHAR(32) UNIQUE NOT NULL,
        password VARCHAR(1024) UNIQUE NOT NULL
    );`
    ;

instructions.tables.misc =
    `CREATE TABLE misc(
        id integer GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
        attribute VARCHAR UNIQUE NOT NULL,
        value VARCHAR UNIQUE NOT NULL
    );`
    ;

instructions.tables.users =
    `CREATE TABLE users(
        id bigint GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
        name VARCHAR UNIQUE NOT NULL,
        email VARCHAR UNIQUE NOT NULL,
        phoneNo VARCHAR UNIQUE NOT NULL,
        details VARCHAR UNIQUE NOT NULL,
        review_rating smallint CHECK (review_rating > 0 AND review_rating <= 5),
        review_description text
    );`;

instructions.tables.blog_categories =
    `CREATE TABLE blog_categories(
        id smallint GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
        name VARCHAR UNIQUE NOT NULL,
        description VARCHAR NOT NULL
    );`;

instructions.tables.food_categories =
    `CREATE TABLE food_categories(
        id smallint GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
        name VARCHAR UNIQUE NOT NULL,
        description VARCHAR NOT NULL
    );`;

instructions.tables.images =
    `CREATE TABLE images(
        id smallint GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
        name VARCHAR UNIQUE NOT NULL,
        data BYTEA UNIQUE NOT NULL
    );`;

instructions.tables.employees =
    `CREATE TABLE employees(
        id smallint GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
        name VARCHAR UNIQUE NOT NULL,
        role VARCHAR UNIQUE NOT NULL,
        details VARCHAR UNIQUE NOT NULL,
        imageid smallint REFERENCES images (id) ON DELETE RESTRICT
    );`;

instructions.tables.blogs =
    `CREATE TABLE blogs(
        id smallint GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
        title VARCHAR UNIQUE NOT NULL,
        description VARCHAR,
        story text NOT NULL,
        categoryid smallint REFERENCES blog_categories (id) ON DELETE RESTRICT,
        imageid smallint REFERENCES images (id) ON DELETE RESTRICT
    );`;

instructions.tables.foods =
    `CREATE TABLE foods(
        id smallint GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
        name VARCHAR UNIQUE NOT NULL,
        description VARCHAR,
        flavour VARCHAR,
        price integer CHECK (price > 0),
        visitors bigint CHECK ( visitors > 0 ),
        categoryid smallint REFERENCES food_categories (id) ON DELETE RESTRICT,
        imageid smallint REFERENCES images (id) ON DELETE RESTRICT
    );`;

module.exports = instructions;